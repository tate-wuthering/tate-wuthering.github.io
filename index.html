<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LINE Flex Message 分享範例</title>
  </head>
  <body>
    <button id="btnShareInvite">分享邀請給朋友</button>
  </body>
</html>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
const flexMessage = {
  type: "flex",
  altText: "測試",
  contents: {
    type: "bubble",
    hero: {
      type: "image",
      url: "https://developers-resource.landpress.line.me/fx/img/01_1_cafe.png",
      size: "full",
      aspectRatio: "20:13",
      aspectMode: "cover"
    },
    body: {
      type: "box",
      layout: "vertical",
      contents: [
        {
          type: "text",
          text: "邀請您加入",
          weight: "bold",
          size: "xl"
        },
        {
          type: "text",
          text: "這是一則測試訊息",
          size: "sm",
          color: "#999999",
          margin: "md"
        }
      ]
    },
    footer: {
      type: "box",
      layout: "vertical",
      spacing: "sm",
      contents: [
        {
          type: "button",
          style: "primary",
          action: {
            type: "uri",
            label: "立即查看",
            uri: "https://example.com"
          }
        }
      ]
    }
  }
};

async function main() {
  await liff.init({ liffId: "2008663808-Mp39q302" });

  document.querySelector("#btnShareInvite").addEventListener("click", async () => {
    if (!liff.isLoggedIn()) {
      liff.login();
      return;
    }

    try {
      await liff.shareTargetPicker([
        {
          type: "flex",
          altText: flexMessage.altText,
          contents: flexMessage.contents
        }
      ]);

      alert("已分享！");
    } catch (err) {
      console.error(err);
      alert("分享失敗");
    }
  });
}

main();
</script>
